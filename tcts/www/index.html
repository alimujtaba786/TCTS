<!doctype html>

<html>

 <head>

 <meta charset="utf-8">

 <title>TCTS</title>

 <link href="jquery.mobile/jquery.mobile.theme-1.4.0.css" rel="stylesheet" type="text/css">

 <link href="jquery.mobile/jquery.mobile.structure-1.4.0.css" rel="stylesheet" type="text/css">

 <link href="jquery.mobile/jquery.mobile.icons-1.4.0.css" rel="stylesheet" type="text/css">

 <script src="jquery.mobile/jquery-1.9.1.js" type="text/javascript"></script>

 <script src="jquery.mobile/jquery.mobile-1.4.0.js" type="text/javascript"></script>

 <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

 <script>
var map;
jQuery(document).ready(function() {




	// Load google map

	map = new google.maps.Map( document.getElementById("gmap"),  {

		center: new google.maps.LatLng(24.868,67.06477),

		zoom: 11,

		mapTypeId: google.maps.MapTypeId.ROADMAP,

		panControl: true,

		streetViewControl: false,

		mapTypeControl: false

	});

	});

	var coordsF;
	var coordsS;


	function Search() {

 				var res= new Array();

	

 var geocoder = new google.maps.Geocoder(); 

		geocoder.geocode({

				address : jQuery('input[name=from]').val(), 

				region: 'no' 

			},

		    function(results, status) {

		    	if (status.toLowerCase() == 'ok') {

					// Get center

					coordsF = new google.maps.LatLng(

						results[0]['geometry']['location'].lat(),

						results[0]['geometry']['location'].lng()

					);

					res[0]=coordsF.lat();

					res[1]=coordsF.lng();










                geocoder.geocode({

				address : jQuery('input[name=to]').val(), 

				region: 'no' 

			},

		    function(results, status) {

		    	if (status.toLowerCase() == 'ok') {

					// Get center

					coordsS = new google.maps.LatLng(

						results[0]['geometry']['location'].lat(),

						results[0]['geometry']['location'].lng()

					);

				res[2]=coordsS.lat();

					res[3]=coordsS.lng();

					

					makeAlert(res);

				
				
		    	}

			}

		);













				

		    	}

			}

		);


	}

	

	function makeAlert(str){
		
		
		marker=new google.maps.Marker({
  position:coordsF,
  animation:google.maps.Animation.BOUNCE
  });

marker.setMap(map);
	
		
		marker=new google.maps.Marker({
  position:coordsS,
  animation:google.maps.Animation.BOUNCE
  });

marker.setMap(map);
	
	
		
	var myTrip = [coordsS,coordsF];
	
var flightPath = new google.maps.Polyline({
  path:myTrip,
  strokeColor:"#0000FF",
  strokeOpacity:0.8,
  strokeWeight:2
});
flightPath.setMap(map);

var midLat=((coordsS.lat()+coordsF.lat())/2);
var midLng=((coordsS.lng()+coordsF.lng())/2);

map.panTo(new google.maps.LatLng(midLat,midLng));
	
	//	var chk = confirm("Are you Sure you want to move From ("+str[0]+" , "+str[1]+") To("+str[2]+" , "+str[3]+")");

		}

	

	

 </script>

 </head>




 <body>

 <div data-role="page" id="page">

   <div data-role="header">

     <h1>Demo-TCTS</h1>

   </div>

   <div data-role="content">

     <div id="gmap" style="width:100%x; height:250px;"></div>

     <div data-role="fieldcontain">

       <label for="number">Address From:</label>

       <input type="text" name="from" id="from" value=""  />

     </div>

     <div data-role="fieldcontain">

       <label for="number2">Address To:</label>

       <input type="text" name="to" id="to" value=""  />

     </div>

     <table style="width:100%">

       <tr>

         <td><button data-icon="search" onClick="Search()">Search</button></td>

         <td><button data-icon="refresh">Refresh</button></td>

       </tr>

     </table>

   </div>

   <div data-role="footer">

     <h4>All Rights Reserved</h4>

   </div>

 </div>

</body>

</html>